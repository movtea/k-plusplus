# k-plusplus

# Немного правил

1. Описывать код с комментариями, как приведено ниже
2. В репозитории необходимо создавать модули в папке /src с названием модуля с основным кодом и его библиотекой, в папке /lib создавать папки подключаемых библиотек, необходимых для работы кода (Пример дерева выше, все директории с "+" в начале названия)
3. Потом

# Описание

Данное приложение анализирует содержимое заданного каталога (со всеми подкаталогами), считает хэш-суммы всех файлов и проверяет, упоминаются ли эти файлы в базе данных NSRL. На выходе будет создана база данных SQLite, состоящая из двух таблиц. В одной содержатся пути к файлам, которые упоминаются в NSRL, а в другой - файлы, которые не были найдены в базе NSRL.

## Структура проекта

```
k-plusplus/
|-- src/
|   |-- main.cpp
|   |-- nsrlRepository/
|   |   |-- nsrlRepository.cpp
|   |   |-- nsrlRepository.h
|   |-- +moduleNew/
|   |   |-- +moduleNew.cpp
|   |   |-- +moduleNew.h
|-- lib/
|   |-- sqlite3/
|   |   |-- sqlite3.c
|   |   |-- sqlite3.h
|   |-- +libraryNew/
|   |   |-- +libraryNew.c
|   |   |-- +libraryNew.h
|-- tests/
|   |-- +new_unit_tests.cpp
|-- build/
|-- doc/
|-- models/
|   |-- fileSchema.h
|-- Makefile
|-- README.md
```

- **src** : содержит файлы исходного кода, включая основную точку входа приложения. и различные модули.
- **lib** : для сторонних библиотек или внешних зависимостей. Пример sqlite3 и cryptopp.
- **tests** : Содержит модульные тесты.
- **build** : Каталог для артефактов сборки. Все объектные файлы.
- **doc** : хранилище для файлов документации. (Возможно понадобится для картинок)
- **Makefile** : файл конфигурации Make.
- **README.md** : документация Markdown с инструкциями по проекту.

### Какие модули у нас будут

1. Модуль для работы с базой данных NSRL.
2. Модуль для работы с базой в которой будет ответ.
3. Модуль для получения списка всех файлов в директории.
4. Модуль для получения хеш с помощью cryptopp.

Модель File:

- name
- path
- hash-sha1
- hash-sha256
- hash-md5
- hash-crc32

За подробностями models/fileSchema.h или к архитектору)

## Описание модулей

### Модуль для работы с базой данных NSRL.

Инструкция использования:

```c++

try
{
    // Создание объекта репозитория
    NSRLRepository nsrlRepo;

    // Создание объекта файла
    File testFile;
    testFile.name = "Test";
    testFile.hash_sha1 = "no";

    if (nsrlRepo.IsHashInDB(&testFile)){
        cout << "Если есть файл в бд"
    } else {
        cout << "Если нет файла в бд"
    }
}
catch (const NSRLRepository::OpenDBException &ex) // Если произошло исключение при открытии БД
{
    cout << "Ошибка открытия БД SQLite № " << ex.error << endl;
    return 1;
}
```
### Модуль для обхода заданной директории.

Инструкция использования:

```c++
vector<FilePtr> filename  = dir("/path/to/dir");

for(int i = 0; i < filename.size(); i++)
{
    cout << filename[i]->name<< endl;
    cout << filename[i]->path<< endl;
}

filename.clear();
```